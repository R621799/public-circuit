// --- 1. THE TOOTHED RACK ---
const rackGroup = new THREE.Group();
const rackBody = new THREE.Mesh(new THREE.BoxGeometry(0.3, 3, 0.6), new THREE.MeshStandardMaterial({color: 0x7f8c8d}));
rackGroup.add(rackBody);

// Adding individual teeth to the rack
for (let i = 0; i < 15; i++) {
    const rackTooth = new THREE.Mesh(new THREE.BoxGeometry(0.15, 0.1, 0.5), new THREE.MeshStandardMaterial({color: 0x7f8c8d}));
    rackTooth.position.set(0.15, -1.4 + (i * 0.2), 0);
    rackGroup.add(rackTooth);
}
rackGroup.position.set(-1.8, 0.5, 0);
scene.add(rackGroup);

// --- 2. PINION GEAR (Gear A - Large) ---
const pinionGroup = new THREE.Group();
const pinionBody = new THREE.Mesh(new THREE.CylinderGeometry(0.8, 0.8, 0.4, 32), new THREE.MeshStandardMaterial({ color: 0xe74c3c }));
pinionBody.rotation.z = Math.PI / 2;
pinionGroup.add(pinionBody);

for(let i=0; i<16; i++){
    const t = new THREE.Mesh(new THREE.BoxGeometry(0.25, 0.4, 0.15), new THREE.MeshStandardMaterial({color: 0xe74c3c}));
    const angle = (i/16) * Math.PI * 2;
    t.position.set(Math.cos(angle)*0.8, 0, Math.sin(angle)*0.8);
    t.rotation.y = angle;
    pinionGroup.add(t);
}
pinionGroup.position.set(-0.8, 0.5, 0);
scene.add(pinionGroup);

// --- 3. FOLLOWER GEAR (Gear B - Small) ---
// This gear connects to the motor and spins faster
const followerGroup = new THREE.Group();
const followerBody = new THREE.Mesh(new THREE.CylinderGeometry(0.4, 0.4, 0.45, 32), new THREE.MeshStandardMaterial({ color: 0x3498db }));
followerBody.rotation.z = Math.PI / 2;
followerGroup.add(followerBody);

for(let i=0; i<8; i++){
    const t = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.45, 0.1), new THREE.MeshStandardMaterial({color: 0x3498db}));
    const angle = (i/8) * Math.PI * 2;
    t.position.set(Math.cos(angle)*0.4, 0, Math.sin(angle)*0.4);
    t.rotation.y = angle;
    followerGroup.add(t);
}
// Positioned to touch the Large Pinion
followerGroup.position.set(0.35, 0.5, 0); 
scene.add(followerGroup);